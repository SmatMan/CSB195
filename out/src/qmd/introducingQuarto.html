<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Boris Steipe">
<meta name="dcterms.date" content="2025-09-29">

<title>Introducing Quarto</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="introducingQuarto_files/libs/clipboard/clipboard.min.js"></script>
<script src="introducingQuarto_files/libs/quarto-html/quarto.js"></script>
<script src="introducingQuarto_files/libs/quarto-html/popper.min.js"></script>
<script src="introducingQuarto_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="introducingQuarto_files/libs/quarto-html/anchor.min.js"></script>
<link href="introducingQuarto_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="introducingQuarto_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="introducingQuarto_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="introducingQuarto_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="introducingQuarto_files/libs/bootstrap/bootstrap-c0367b04c37547644fece4185067e4a7.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="introducingQuarto_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="introducingQuarto_files/libs/vis-9.1.0/vis-network.min.css" rel="stylesheet">
<script src="introducingQuarto_files/libs/vis-9.1.0/vis-network.min.js"></script>
<script src="introducingQuarto_files/libs/visNetwork-binding-2.1.4/visNetwork.js"></script>
<script src="introducingQuarto_files/libs/FileSaver-1.1.20151003/FileSaver.min.js"></script>
<script src="introducingQuarto_files/libs/Blob-1.0/Blob.js"></script>
<script src="introducingQuarto_files/libs/canvas-toBlob-1.0/canvas-toBlob.js"></script>
<script src="introducingQuarto_files/libs/html2canvas-0.5.0/html2canvas.js"></script>
<script src="introducingQuarto_files/libs/jspdf-1.3.2/jspdf.debug.js"></script>
<style>
  .version-info {
    font-size: 70%;
    color: #BBBBBB;
    margin-top: -10px;
  }
  /* Style for an AI prompt box */
  .ai-prompt-box {
      /* Define variables on the container so they are accessible by both
      the box and its pseudo-elements. Scope is the element in which they
      are defined, plus all its descendants. */
    --border-color: #e0e0e0;
    --box-bg-color: #f7f7f7;
    /* Define a content variable that is instantiated with the value with which
    this element is called in the actual source below. This too exists for this
    scope, and all descendants. */
    --prompt-text: attr(data-prompt);
    position: relative;
    border: 1px solid var(--border-color); /* use the variable */
    padding: 1.5em;
    margin-top: 2em;
    position: relative;
    border-radius: 5px;
    background-color: var(--box-bg-color);  /* use the variable */
  }
  .ai-prompt-box::before { /* adds a label to the tab */
    content: var(--prompt-text); /* The label for the box */
    position: absolute;
    top: -1.3em; /* Move it up above the box */
    left: 1em;
    padding: 0 0.5em;
    border-top: 1px solid var(--border-color);
    border-left: 1px solid var(--border-color);
    border-right: 1px solid var(--border-color);
    background-color: var(--box-bg-color);
    border-radius: 5px;
    font-weight: bold;
    color: #555555;
    font-size: 0.9em;
  }
  /* Style for the button */
  .copy-button {
      position: absolute;
      top: 5px;
      right: 5px;
      background-color: #e9ecef;
      border: 1px solid #ced4da;
      color: #495057;
      padding: 3px 8px;
      border-radius: 3px;
      cursor: pointer;
      font-size: 0.8em;
      opacity: 0.8;
  }
  .copy-button:hover {
      opacity: 1;
      background-color: #dee2e6;
  }
</style>
<script>
  function copyContent(targetId) {
      const contentElement = document.getElementById(targetId);
      const textToCopy = contentElement.innerText;
      const copyButton = contentElement.querySelector('.copy-button');
      const originalContent = copyButton.innerHTML;

      navigator.clipboard.writeText(textToCopy)
          .then(() => {
              // Success feedback
              copyButton.innerHTML = '<i class="bi bi-check-lg"></i> Copied!';

              // Revert button text after 1.5 seconds
              setTimeout(() => {
                  copyButton.innerHTML = originalContent;
              }, 1500);
          })
          .catch(err => {
              console.error('Could not copy text: ', err);
          });
  }
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#basic-markdown-markup" id="toc-basic-markdown-markup" class="nav-link active" data-scroll-target="#basic-markdown-markup"><span class="header-section-number">1</span> Basic <em>Markdown</em> markup</a></li>
  <li><a href="#advanced-markup" id="toc-advanced-markup" class="nav-link" data-scroll-target="#advanced-markup"><span class="header-section-number">2</span> Advanced markup</a></li>
  <li><a href="#running-r-code" id="toc-running-r-code" class="nav-link" data-scroll-target="#running-r-code"><span class="header-section-number">3</span> Running R-code</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="header-section-number">4</span> References</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introducing Quarto</h1>
<p class="subtitle lead">Setup, markup, workflow, elements, and R code</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Boris Steipe </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 29, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<!--
HTML formatted comments like this do not appear in the output. This can be used to include (hidden) document metadata with the source. For example, I use this for listing version information.
-->
<div class="version-info">
<!-- HTML divs are "fenced" with three colons. This particular div uses code to mix static text with variables that I defined in the YAML block at the top of the document. -->
<p>Version v 1.0, last updated September 29, 2025. 🤔</p>
</div>
<!-- 

versions:
  1.0 - First in-class version for CSB195: 2025-09. 
        -  Basic markup and document elements
        -  bibliography
        -  a copy-box to demonstrate passing data between the YAML header
           and the document itself, using css and javascript; and 
        -  an interactive plot coded to specifications by CoPilot-GPT5
-->
<p>This Quarto document integrates metadata, styling, and R code. Its basic content is written with a simple text markup language called <a href="https://www.markdownguide.org/">“Markdown”</a>. But when <em>rendering</em> the document it uses the <strong>Quarto</strong> engine to configure the process, the <code>knitr::</code> R package to execute code and collect the results into an intermediate markdown document, and the <strong>Pandoc</strong> document converter, to create the output as HTML (or .docx, or .pdf, or …). This is a sane philosophy for technical documentation: keep everything in one placee, and build derivatives - like reports, reference documents, or presentations - from the authoritative source, whenever needed. This guarantees that different views of the same contents do not go out of sync.</p>
<p>In summary:</p>
<ol type="1">
<li>You author and edit the Quarto document on your local machine, using RStudio.</li>
<li>The many options you might want to set are defined in the YAML block at the top of the document.</li>
<li>When you click the render button, <strong>Quarto</strong> starts up and checks for a <code>_quarto.yml</code> configuration file in the top-most directory of the project, then its child directories, down the path to the directory that contains the source file. All configuartions are applied successively and overwrite configurations that were set earlier. Finally the configurations in the YAML block of the source file itself are applied.</li>
<li>Next, <strong>Quarto</strong> invokes the R package <code>knitr::</code> to run the R code chunks, and to collect the results. Data is cached, and images (plots) are stored in an output asset folder (often named <code>_files</code>, or a cache folder)..</li>
<li>Then <code>knitr::</code> creates an intermediate markdown version of the document, which embeds the plots as images, creates tables, handles the citations and references correctly etc.</li>
<li><strong>Quarto</strong> hands this intermediate file off to <strong>Pandoc</strong>, which renders it into the requested output format, and places the result, for example an HTML file together with its image assets, into the requested output directory. This can then be opened by the browser, or another document reader, or screen projection software - as the case may be.</li>
</ol>
<section id="basic-markdown-markup" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Basic <em>Markdown</em> markup</h1>
<div id="prompt-content-1" class="ai-prompt-box" data-prompt="AI Prompt">
<p>Can you explain to me what a “.qmd” document is and why it is useful?</p>
<button class="copy-button" onclick="copyContent('prompt-content-1')">
<i class="bi bi-clipboard"></i>
</button>
</div>
<p>Writing the content itself is straightforward. Markdown is designed to be easily readable even in its raw format. The simple syntax uses common keyboard symbols to indicate structure and emphasis. The four most essential elements you will use are <strong>Headings</strong> for structure, <strong>Emphasis</strong> for bold and italics, <strong>Lists</strong> for organized points, and the simple use of <strong>backticks</strong> to format code and variables inline. Markdown handles paragraphs automatically—just separate blocks of text with a blank line. For complex elements where Markdown syntax is limited, such as detailed tables, Quarto allows you to insert raw <code>HTML</code> (or <span class="math inline">\(\LaTeX{}\)</span>) <!-- Note: the $ signs designate this part as Latex-formatted text, which should be type-set as a mathematical formula through the Latex engine. --> directly into your document, giving you complete control over the final presentation.</p>
<div id="prompt-content-4" class="ai-prompt-box" data-prompt="AI Prompt">
<p>What exactly is HTML, and how is it written, and what is Latex? And why is Latex often used? And how do I use it in my quarto document?</p>
<button class="copy-button" onclick="copyContent('prompt-content-4')">
<i class="bi bi-clipboard"></i>
</button>
</div>
<p><strong>Tables</strong> deserve special mention. While markdown contains conventions to create tables, these are not really simpler than HTML syntax. Thus there is no real advantage of markdown over HTML table syntax, which is more expressive, versatile, and general. Generally, all a table needs is a pair of<code>&lt;table&gt; ... &lt;/table&gt;</code> tags, enclosing a pair of <code>&lt;tr&gt; ... &lt;/tr&gt;</code> table row tags, containing in each row the same number of <code>&lt;td&gt; ... &lt;/td&gt;</code> table data (cell) tags (or a pair of <code>&lt;th&gt; ... &lt;/th&gt;</code> table header cell tags in the first row). Like this:</p>
<table>
<tbody><tr>
<th>
To create this …
</th>
<th>
Type this …
</th>

</tr><tr>
<td>
<strong>Document sections (Headings)</strong>
</td>
<td>
</td>
</tr>
<tr>
<td>
Main Section Title
</td>
<td>
<code># My Title ...</code>
</td>
</tr>
<tr>
<td>
Subsection Title
</td>
<td>
<code>## My Subsection ...</code>
</td>
</tr>
<tr>
<td>
Sub-subection Title
</td>
<td>
<code>### My Subsubsection ...</code>
</td>
</tr>
<tr>
<td>
<strong>Text emphasis</strong>
</td>
<td>
</td>
</tr>
<tr>
<td>
<em>Italic text</em>
</td>
<td>
<code>_Italic text_</code>
</td>
</tr>
<tr>
<td>
<strong>Bold text</strong>
</td>
<td>
<code>**Bold text**</code>
</td>
</tr>
<tr>
<td>
<strong>Lists</strong>
</td>
<td>
</td>
</tr>
<tr>
<td>
<ul>
<li>Bullet Point
</li></ul></td>
<td>
<code>* Bullet Point</code>
</td>
</tr>
<tr>
<td>

<ol type="1">
<li>Numbered list</li>
<li>another list item</li>
<li>and one more
</li></ol></td>
<td>
<code>1.</code> <code>Numbered list</code><br> <code>1.</code> <code>another list item</code><br> <code>1.</code> <code>and one more</code><br>
</td>
</tr>
<tr>
<td>
Inline <code>code</code> ignores markup
</td>
<td>
<code>Inline `code` ignores markup</code>
</td>
</tr>
</tbody></table>

<p>There is always more to learn, a popular reference these days appears to be the <a href="https://www.markdownguide.org/basic-syntax/">Markdown Guide</a>.</p>
</section>
<section id="advanced-markup" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Advanced markup</h1>
<p>I have written a few advanced HTML/Javascript examples into this document to demonstrate how variables can move from the YAML header block at the top into the rendered document. Spend some time with the code to understand:</p>
<ol type="1">
<li>How the version and date string works at the top; and</li>
<li>How the “AI-prompt” box works, that appears here from time to time, powered by css to format its appearance, and a bit of Javascript to create a button that copies its contents to your clipboard.</li>
</ol>
</section>
<section id="running-r-code" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Running R-code</h1>
<p>R-code is <em>fenced</em> in triple backticks, and can be <em>run</em> in the IDE’s R-interpreter. Running the code works much like running any R script, except that the document maintains its own “workspace”, and thus does not overwrite your variables that you have set outside the workspace. That said, there is still a subtle catch: when the interpreter “runs” a <code>.qmd</code> document, the working directory is not necessarily the same as the one you are currently using.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This returns the working directory at the time this code was executed</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># during rendering. It might no be what you expect, since the</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># mechanism that renders this document uses the directory in which</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># the document exists as its working directory. I have placed a</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># directive to use the top level directory of the project into a</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># quarto configuration file "_quato.yml". Getting the process to work</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># in a predictable location is essential if you read or write any</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># data from a document that is meant to be portable, i.e. you can't</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># just hardcode the paths.</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/arjun/Documents/School/CSB195"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If the rendering process is reading and interpreting the</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># directives in ./_quarto.yml then this lists the files in</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># the subdirectory ./dat/, not ./src/qmd/dat/ (where ./src/qmd/dat is )</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>(<span class="st">"dat"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "aa_prop.json"                            
[2] "aaFeatureSpace.2025.Rds"                 
[3] "aaFeatureSpace.4.1.Rds"                  
[4] "aaSim.v4.1.Rds"                          
[5] "Breimann_2024_Supplementary_Table_1.xlsx"
[6] "Breimann_2024_Supplementary_Table_3.xlsx"
[7] "SGC.csv"                                 </code></pre>
</div>
</div>
<p>Let’s try doing something slightly fancy: a plot of relationships between amino acids the way biochemists traditionally define them. <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> To the best of my knowledge, the first use of a Venn diagram for amino acid categories was written up in a paper by Willie Taylor, in the Department of Crystallography in Birkbeck College, London <span class="citation" data-cites="taylor1986">(<a href="#ref-taylor1986" role="doc-biblioref">Taylor 1986, 209</a>)</span>.</p>
<div id="prompt-content-2" class="ai-prompt-box" data-prompt="AI Prompt">
<p>Can you explain to me how references and citations work in a quarto document? I also need to know when to put references in my document’s YAML header, and when to use a separate .bib file.</p>
<button class="copy-button" onclick="copyContent('prompt-content-2')">
<i class="bi bi-clipboard"></i>
</button>
</div>
<p>On with our plot. Here is the prompt I used to get the R-code chunk below.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<div id="prompt-content-3" class="ai-prompt-box" data-prompt="AI Prompt">
<p>I would like to include a slightly fancy plot in my quarto document. It should display the relationships between the amino acids in one-letter code, once they automatically align themselves according to their category memberships. I hope that this will turn out looking something like Willie Taylor’s Venn diagram in his 1986 J Theor. Biol. paper. I think a force-directed layout should work nicely for that. Basically, the number of shared category memberships between a pair should define how much each pair is attracted to each other in the resulting diagram.</p>
<p>It would be great if we can get some interactivity too, being able to drag individual amino-acids and re-relax the network after repositioning.</p>
<p>The R chunk itself should be hidden in the HTML rendered output, but the plot itself should be displayed, and have an informative image caption. Let’s set those options in the modern quarto “#|” style. The amino acid positions should be labelled with one-letter codes letters, and they should use the following colours:</p>
<p>c(G = “#B9C2CD”, P = “#D4CF82”, C = “#F1DD38”, A = “#D2DF40”, V = “#B4E149”, I = “#96E351”, L = “#78E65A”, M = “#6DCB6E”, F = “#63B182”, W = “#599797”, Y = “#4F7CAB”, H = “#4562BF”, R = “#3B48D4”, K = “#5F6BD8”, Q = “#838FDC”, N = “#A8B3E0”, T = “#AA90BA”, S = “#AD6D95”, D = “#B04B70”, E = “#B3294B”)</p>
<p>… and the categories are defined like so: list(tiny = c(“G”, “A”, “C”, “S”), small = c(“G”, “A”, “C”, “S”, “T”, “D”, “N”, “P”, “V”), aliphatic = c(“I”, “L”, “V”), aromatic = c(“F”, “Y”, “W”, “H”), hydrophobic = c(“I”, “L”, “V”, “M”, “A”, “G”, “C”, “T”, “F”, “Y”, “W”, “H”), positive = c(“K”, “H”, “R”), negative = c(“D”, “E”), charged = c(“D”, “E”, “K”, “H”, “R”), polar = c(“D”, “E”, “K”, “H”, “R”, “Q”, “N”, “S”, “C”, “T”, “Y”, “W”))</p>
<p>If we need special packages, they should be installed conditional to the output of a call to requireNamespace(), and this should be a portable document, so we should neither produce nor consume external data. I think the visNetwork:: package might be helpful … but you are free to suggest whatever you feel works best. Perhaps keep the things to base-R if possible, e.g.&nbsp;we can use “|&gt;” if we need pipes.</p>
<p>Also, please make sure the output is properly displayed as a code-block, and the UI does not interpret the code as markdown …</p>
<p>Are the instructions clear? Or do you need further information? Or do you think you can write the chunk based on that?</p>
<button class="copy-button" onclick="copyContent('prompt-content-3')">
<i class="bi bi-clipboard"></i>
</button>
</div>
<p>Note that we asked to set a flag on the chunk to hide its code (cf.&nbsp;“<code>echo: false</code>” below), and just display the plot itself. You can examine the code in the original <code>.qmd</code> document.</p>
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-9eceb20dc2a931752ae4" style="width:100%;height:650px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-9eceb20dc2a931752ae4">{"x":{"nodes":{"id":["G","P","C","A","V","I","L","M","F","W","Y","H","R","K","Q","N","T","S","D","E"],"label":["G","P","C","A","V","I","L","M","F","W","Y","H","R","K","Q","N","T","S","D","E"],"color":["#B9C2CD","#D4CF82","#F1DD38","#D2DF40","#B4E149","#96E351","#78E65A","#6DCB6E","#63B182","#599797","#4F7CAB","#4562BF","#3B48D4","#5F6BD8","#838FDC","#A8B3E0","#AA90BA","#AD6D95","#B04B70","#B3294B"],"title":["<b>G<\/b><br/>Categories: tiny, small, hydrophobic","<b>P<\/b><br/>Categories: small","<b>C<\/b><br/>Categories: tiny, small, hydrophobic, polar","<b>A<\/b><br/>Categories: tiny, small, hydrophobic","<b>V<\/b><br/>Categories: small, aliphatic, hydrophobic","<b>I<\/b><br/>Categories: aliphatic, hydrophobic","<b>L<\/b><br/>Categories: aliphatic, hydrophobic","<b>M<\/b><br/>Categories: hydrophobic","<b>F<\/b><br/>Categories: aromatic, hydrophobic","<b>W<\/b><br/>Categories: aromatic, hydrophobic, polar","<b>Y<\/b><br/>Categories: aromatic, hydrophobic, polar","<b>H<\/b><br/>Categories: aromatic, hydrophobic, positive, charged, polar","<b>R<\/b><br/>Categories: positive, charged, polar","<b>K<\/b><br/>Categories: positive, charged, polar","<b>Q<\/b><br/>Categories: polar","<b>N<\/b><br/>Categories: small, polar","<b>T<\/b><br/>Categories: small, hydrophobic, polar","<b>S<\/b><br/>Categories: tiny, small, polar","<b>D<\/b><br/>Categories: small, negative, charged, polar","<b>E<\/b><br/>Categories: negative, charged, polar"],"size":[28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28]},"edges":{"from":["G","G","G","G","G","G","G","G","G","G","G","G","G","G","G","P","P","P","P","P","P","P","C","C","C","C","C","C","C","C","C","C","C","C","C","C","C","C","C","A","A","A","A","A","A","A","A","A","A","A","A","V","V","V","V","V","V","V","V","V","V","V","I","I","I","I","I","I","I","L","L","L","L","L","L","M","M","M","M","M","F","F","F","F","W","W","W","W","W","W","W","W","W","W","Y","Y","Y","Y","Y","Y","Y","Y","Y","H","H","H","H","H","H","H","H","R","R","R","R","R","R","R","K","K","K","K","K","K","Q","Q","Q","Q","Q","N","N","N","N","T","T","T","S","S","D"],"to":["P","C","A","V","I","L","M","F","W","Y","H","N","T","S","D","C","A","V","N","T","S","D","A","V","I","L","M","F","W","Y","H","R","K","Q","N","T","S","D","E","V","I","L","M","F","W","Y","H","N","T","S","D","I","L","M","F","W","Y","H","N","T","S","D","L","M","F","W","Y","H","T","M","F","W","Y","H","T","F","W","Y","H","T","W","Y","H","T","Y","H","R","K","Q","N","T","S","D","E","H","R","K","Q","N","T","S","D","E","R","K","Q","N","T","S","D","E","K","Q","N","T","S","D","E","Q","N","T","S","D","E","N","T","S","D","E","T","S","D","E","S","D","E","D","E","E"],"value":[1,3,3,2,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,3,2,1,1,1,1,2,2,2,1,1,1,2,3,3,2,1,2,1,1,1,1,1,1,1,1,2,2,1,2,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,1,3,3,1,1,1,1,2,1,1,1,3,1,1,1,1,2,1,1,1,3,3,1,1,2,1,2,2,3,1,1,1,1,2,2,1,1,1,1,2,2,1,1,1,1,1,2,2,2,1,2,2,1,2,1,3],"width":[1,3,3,2,1,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,3,2,1,1,1,1,2,2,2,1,1,1,2,3,3,2,1,2,1,1,1,1,1,1,1,1,2,2,1,2,2,1,1,1,1,1,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,1,3,3,1,1,1,1,2,1,1,1,3,1,1,1,1,2,1,1,1,3,3,1,1,2,1,2,2,3,1,1,1,1,2,2,1,1,1,1,2,2,1,1,1,1,1,2,2,2,1,2,2,1,2,1,3],"length":[380,141,141,204,380,380,380,380,380,380,380,380,204,204,380,380,380,380,380,380,380,380,141,204,380,380,380,380,204,204,204,380,380,380,204,141,141,204,380,204,380,380,380,380,380,380,380,380,204,204,380,204,204,380,380,380,380,380,380,204,380,380,204,380,380,380,380,380,380,380,380,380,380,380,380,380,380,380,380,380,204,204,204,380,141,141,380,380,380,380,204,380,380,380,141,380,380,380,380,204,380,380,380,141,141,380,380,204,380,204,204,141,380,380,380,380,204,204,380,380,380,380,204,204,380,380,380,380,380,204,204,204,380,204,204,380,204,380,141],"title":["<b>G ↔ P<\/b><br/>Shared categories (1): small","<b>G ↔ C<\/b><br/>Shared categories (3): tiny, small, hydrophobic","<b>G ↔ A<\/b><br/>Shared categories (3): tiny, small, hydrophobic","<b>G ↔ V<\/b><br/>Shared categories (2): small, hydrophobic","<b>G ↔ I<\/b><br/>Shared categories (1): hydrophobic","<b>G ↔ L<\/b><br/>Shared categories (1): hydrophobic","<b>G ↔ M<\/b><br/>Shared categories (1): hydrophobic","<b>G ↔ F<\/b><br/>Shared categories (1): hydrophobic","<b>G ↔ W<\/b><br/>Shared categories (1): hydrophobic","<b>G ↔ Y<\/b><br/>Shared categories (1): hydrophobic","<b>G ↔ H<\/b><br/>Shared categories (1): hydrophobic","<b>G ↔ N<\/b><br/>Shared categories (1): small","<b>G ↔ T<\/b><br/>Shared categories (2): small, hydrophobic","<b>G ↔ S<\/b><br/>Shared categories (2): tiny, small","<b>G ↔ D<\/b><br/>Shared categories (1): small","<b>P ↔ C<\/b><br/>Shared categories (1): small","<b>P ↔ A<\/b><br/>Shared categories (1): small","<b>P ↔ V<\/b><br/>Shared categories (1): small","<b>P ↔ N<\/b><br/>Shared categories (1): small","<b>P ↔ T<\/b><br/>Shared categories (1): small","<b>P ↔ S<\/b><br/>Shared categories (1): small","<b>P ↔ D<\/b><br/>Shared categories (1): small","<b>C ↔ A<\/b><br/>Shared categories (3): tiny, small, hydrophobic","<b>C ↔ V<\/b><br/>Shared categories (2): small, hydrophobic","<b>C ↔ I<\/b><br/>Shared categories (1): hydrophobic","<b>C ↔ L<\/b><br/>Shared categories (1): hydrophobic","<b>C ↔ M<\/b><br/>Shared categories (1): hydrophobic","<b>C ↔ F<\/b><br/>Shared categories (1): hydrophobic","<b>C ↔ W<\/b><br/>Shared categories (2): hydrophobic, polar","<b>C ↔ Y<\/b><br/>Shared categories (2): hydrophobic, polar","<b>C ↔ H<\/b><br/>Shared categories (2): hydrophobic, polar","<b>C ↔ R<\/b><br/>Shared categories (1): polar","<b>C ↔ K<\/b><br/>Shared categories (1): polar","<b>C ↔ Q<\/b><br/>Shared categories (1): polar","<b>C ↔ N<\/b><br/>Shared categories (2): small, polar","<b>C ↔ T<\/b><br/>Shared categories (3): small, hydrophobic, polar","<b>C ↔ S<\/b><br/>Shared categories (3): tiny, small, polar","<b>C ↔ D<\/b><br/>Shared categories (2): small, polar","<b>C ↔ E<\/b><br/>Shared categories (1): polar","<b>A ↔ V<\/b><br/>Shared categories (2): small, hydrophobic","<b>A ↔ I<\/b><br/>Shared categories (1): hydrophobic","<b>A ↔ L<\/b><br/>Shared categories (1): hydrophobic","<b>A ↔ M<\/b><br/>Shared categories (1): hydrophobic","<b>A ↔ F<\/b><br/>Shared categories (1): hydrophobic","<b>A ↔ W<\/b><br/>Shared categories (1): hydrophobic","<b>A ↔ Y<\/b><br/>Shared categories (1): hydrophobic","<b>A ↔ H<\/b><br/>Shared categories (1): hydrophobic","<b>A ↔ N<\/b><br/>Shared categories (1): small","<b>A ↔ T<\/b><br/>Shared categories (2): small, hydrophobic","<b>A ↔ S<\/b><br/>Shared categories (2): tiny, small","<b>A ↔ D<\/b><br/>Shared categories (1): small","<b>V ↔ I<\/b><br/>Shared categories (2): aliphatic, hydrophobic","<b>V ↔ L<\/b><br/>Shared categories (2): aliphatic, hydrophobic","<b>V ↔ M<\/b><br/>Shared categories (1): hydrophobic","<b>V ↔ F<\/b><br/>Shared categories (1): hydrophobic","<b>V ↔ W<\/b><br/>Shared categories (1): hydrophobic","<b>V ↔ Y<\/b><br/>Shared categories (1): hydrophobic","<b>V ↔ H<\/b><br/>Shared categories (1): hydrophobic","<b>V ↔ N<\/b><br/>Shared categories (1): small","<b>V ↔ T<\/b><br/>Shared categories (2): small, hydrophobic","<b>V ↔ S<\/b><br/>Shared categories (1): small","<b>V ↔ D<\/b><br/>Shared categories (1): small","<b>I ↔ L<\/b><br/>Shared categories (2): aliphatic, hydrophobic","<b>I ↔ M<\/b><br/>Shared categories (1): hydrophobic","<b>I ↔ F<\/b><br/>Shared categories (1): hydrophobic","<b>I ↔ W<\/b><br/>Shared categories (1): hydrophobic","<b>I ↔ Y<\/b><br/>Shared categories (1): hydrophobic","<b>I ↔ H<\/b><br/>Shared categories (1): hydrophobic","<b>I ↔ T<\/b><br/>Shared categories (1): hydrophobic","<b>L ↔ M<\/b><br/>Shared categories (1): hydrophobic","<b>L ↔ F<\/b><br/>Shared categories (1): hydrophobic","<b>L ↔ W<\/b><br/>Shared categories (1): hydrophobic","<b>L ↔ Y<\/b><br/>Shared categories (1): hydrophobic","<b>L ↔ H<\/b><br/>Shared categories (1): hydrophobic","<b>L ↔ T<\/b><br/>Shared categories (1): hydrophobic","<b>M ↔ F<\/b><br/>Shared categories (1): hydrophobic","<b>M ↔ W<\/b><br/>Shared categories (1): hydrophobic","<b>M ↔ Y<\/b><br/>Shared categories (1): hydrophobic","<b>M ↔ H<\/b><br/>Shared categories (1): hydrophobic","<b>M ↔ T<\/b><br/>Shared categories (1): hydrophobic","<b>F ↔ W<\/b><br/>Shared categories (2): aromatic, hydrophobic","<b>F ↔ Y<\/b><br/>Shared categories (2): aromatic, hydrophobic","<b>F ↔ H<\/b><br/>Shared categories (2): aromatic, hydrophobic","<b>F ↔ T<\/b><br/>Shared categories (1): hydrophobic","<b>W ↔ Y<\/b><br/>Shared categories (3): aromatic, hydrophobic, polar","<b>W ↔ H<\/b><br/>Shared categories (3): aromatic, hydrophobic, polar","<b>W ↔ R<\/b><br/>Shared categories (1): polar","<b>W ↔ K<\/b><br/>Shared categories (1): polar","<b>W ↔ Q<\/b><br/>Shared categories (1): polar","<b>W ↔ N<\/b><br/>Shared categories (1): polar","<b>W ↔ T<\/b><br/>Shared categories (2): hydrophobic, polar","<b>W ↔ S<\/b><br/>Shared categories (1): polar","<b>W ↔ D<\/b><br/>Shared categories (1): polar","<b>W ↔ E<\/b><br/>Shared categories (1): polar","<b>Y ↔ H<\/b><br/>Shared categories (3): aromatic, hydrophobic, polar","<b>Y ↔ R<\/b><br/>Shared categories (1): polar","<b>Y ↔ K<\/b><br/>Shared categories (1): polar","<b>Y ↔ Q<\/b><br/>Shared categories (1): polar","<b>Y ↔ N<\/b><br/>Shared categories (1): polar","<b>Y ↔ T<\/b><br/>Shared categories (2): hydrophobic, polar","<b>Y ↔ S<\/b><br/>Shared categories (1): polar","<b>Y ↔ D<\/b><br/>Shared categories (1): polar","<b>Y ↔ E<\/b><br/>Shared categories (1): polar","<b>H ↔ R<\/b><br/>Shared categories (3): positive, charged, polar","<b>H ↔ K<\/b><br/>Shared categories (3): positive, charged, polar","<b>H ↔ Q<\/b><br/>Shared categories (1): polar","<b>H ↔ N<\/b><br/>Shared categories (1): polar","<b>H ↔ T<\/b><br/>Shared categories (2): hydrophobic, polar","<b>H ↔ S<\/b><br/>Shared categories (1): polar","<b>H ↔ D<\/b><br/>Shared categories (2): charged, polar","<b>H ↔ E<\/b><br/>Shared categories (2): charged, polar","<b>R ↔ K<\/b><br/>Shared categories (3): positive, charged, polar","<b>R ↔ Q<\/b><br/>Shared categories (1): polar","<b>R ↔ N<\/b><br/>Shared categories (1): polar","<b>R ↔ T<\/b><br/>Shared categories (1): polar","<b>R ↔ S<\/b><br/>Shared categories (1): polar","<b>R ↔ D<\/b><br/>Shared categories (2): charged, polar","<b>R ↔ E<\/b><br/>Shared categories (2): charged, polar","<b>K ↔ Q<\/b><br/>Shared categories (1): polar","<b>K ↔ N<\/b><br/>Shared categories (1): polar","<b>K ↔ T<\/b><br/>Shared categories (1): polar","<b>K ↔ S<\/b><br/>Shared categories (1): polar","<b>K ↔ D<\/b><br/>Shared categories (2): charged, polar","<b>K ↔ E<\/b><br/>Shared categories (2): charged, polar","<b>Q ↔ N<\/b><br/>Shared categories (1): polar","<b>Q ↔ T<\/b><br/>Shared categories (1): polar","<b>Q ↔ S<\/b><br/>Shared categories (1): polar","<b>Q ↔ D<\/b><br/>Shared categories (1): polar","<b>Q ↔ E<\/b><br/>Shared categories (1): polar","<b>N ↔ T<\/b><br/>Shared categories (2): small, polar","<b>N ↔ S<\/b><br/>Shared categories (2): small, polar","<b>N ↔ D<\/b><br/>Shared categories (2): small, polar","<b>N ↔ E<\/b><br/>Shared categories (1): polar","<b>T ↔ S<\/b><br/>Shared categories (2): small, polar","<b>T ↔ D<\/b><br/>Shared categories (2): small, polar","<b>T ↔ E<\/b><br/>Shared categories (1): polar","<b>S ↔ D<\/b><br/>Shared categories (2): small, polar","<b>S ↔ E<\/b><br/>Shared categories (1): polar","<b>D ↔ E<\/b><br/>Shared categories (3): negative, charged, polar"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"width":"100%","height":"100%","nodes":{"shape":"dot","borderWidth":2,"font":{"size":28,"face":"monospace","color":"#111111"},"shadow":{"enabled":true,"size":10}},"manipulation":{"enabled":false},"edges":{"color":{"color":"#B8B8B8","highlight":"#D81B60"},"smooth":false,"scaling":{"min":1,"max":6}},"physics":{"solver":"forceAtlas2Based","minVelocity":0.75,"stabilization":{"enabled":true,"iterations":180},"forceAtlas2Based":{"gravitationalConstant":-60,"centralGravity":0.01,"springLength":150,"springConstant":0.055,"avoidOverlap":0.6}},"interaction":{"dragNodes":true,"navigationButtons":true,"tooltipDelay":100,"zoomView":true,"hover":true,"zoomSpeed":1}},"groups":null,"width":"100%","height":"650px","idselection":{"enabled":true,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)","highlight":false},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","tooltipStay":300,"tooltipStyle":"position: fixed;visibility:hidden;padding: 5px;white-space: nowrap;font-family: verdana;font-size:14px;font-color:#000000;background-color: #f5f4ed;-moz-border-radius: 3px;-webkit-border-radius: 3px;border-radius: 3px;border: 1px solid #808074;box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);","highlight":{"enabled":true,"hoverNearest":true,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"},"export":{"type":"png","css":"float:right;-webkit-border-radius: 10;\n                  -moz-border-radius: 10;\n                  border-radius: 10px;\n                  font-family: Arial;\n                  color: #ffffff;\n                  font-size: 12px;\n                  background: #090a0a;\n                  padding: 4px 8px 4px 4px;\n                  text-decoration: none;","background":"#fff","name":"aa-force-layout.png","label":"Save image"}},"evals":[],"jsHooks":[]}</script>
<p>Interactive force‑directed layout of the 20 amino acids. Edge attraction (and width) scales with the number of shared classical property categories (after Taylor, J. Theor. Biol., 1986). Drag nodes to re‑relax the layout. Node colors are as specified; hover for category memberships.</p>
</div>
</div>
<p>That is all for now.</p>
</section>
<section id="references" class="level1" data-number="4">

<!-- I ALWAYS include an "end" tag of some sort with all my documents,
     to ensure that copy/paste is complete. -->
<!-- [END] -->

</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">4 References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-taylor1986" class="csl-entry" role="listitem">
Taylor, William Ramsay. 1986. <span>“The Classification of Amino Acid Conservation.”</span> <em>Journal of Theoretical Biology</em> 119 (2): 205–18. <a href="https://doi.org/10.1016/S0022-5193(86)80075-3">https://doi.org/10.1016/S0022-5193(86)80075-3</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>This gives me an opportunity to demo the use of citations and references in a quarto document. (By the way: this is a footnote).<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>I tried this first with Gemini, but could not get it to work out of the box. I then used Microsoft CoPilot-GPT5, got broken code, pasted the error message, and got working code that however misunderstood my informally stated intent. So I rewrote my prompt in a more implementation-oriented, directed way … and got the plot that is included here, which is pretty much what I thought I wanted.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>